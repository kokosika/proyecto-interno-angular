<p-progressBar mode="indeterminate" [style]="{'height': '10px'}" [hidden]="progress"></p-progressBar>
<div style="margin-top: 30px;">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3">
                <div class="panel panel-info" style="background-color: #161F31;color:white">
                    <div class="panel-body text-center">
                        <div class="row">
                            <div class="col-md-12">
                                Avance Real Proyecto
                            </div>
                        </div>
                        <div class="row">
            <div class="col-md-4">
                                <img src="assets/img/ImagenDivUno.png" height="20" width="20">
                            </div>
                            <div class="col-md-4">
                                {{proyecto.porcentajeAvance}} %
                            </div>
                            <div class="col-md-4">
                                <div *ngIf="(proyecto.porcentajeAvance > (+(proyecto.porcentajeEsperado)));else other4">
                                    <img src="assets/img/flechaVerde.png" height="10" width="10">
                                </div>
                                <ng-template #other4>
                                    <img src="assets/img/flechaRoja.png" height="10" width="10">
                                </ng-template>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="panel panel-info" style="background-color: #161F31;color:white">
                    <div class="panel-body text-center">
                        <div class="row">
                            <div class="col-md-12">
                                Porcentaje Esperado
                            </div>
                    </div>
                        <div class="row">
                            <div class="col-md-4">
                                <img src="assets/img/ImagenDivUno.png" height="20" width="20">
                </div>
                            <div class="col-md-4">
                                {{proyecto.porcentajeEsperado}} %
            </div>
            <div class="col-md-4">
                                <div *ngIf="((+(proyecto.porcentajeEsperado)) > proyecto.porcentajeAvance);else other3">
                                    <img src="assets/img/flechaVerde.png" height="10" width="10">
                                </div>
                                <ng-template #other3>
                                    <img src="assets/img/flechaRoja.png" height="10" width="10">
                                </ng-template>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="panel panel-info" style="background-color: #161F31;color:white">
                    <div class="panel-body text-center">
                        <div class="row">
                            <div class="col-md-12">
                                Desviación
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <img src="assets/img/ImagenParaDesviacion.png" height="20" width="20">
                    </div>
                            <div class="col-md-4">
                                <div *ngIf="(proyecto.porcentajeAvance - (+(proyecto.porcentajeEsperado))) > 0;else other">
                                    {{(proyecto.porcentajeAvance - (+(proyecto.porcentajeEsperado))) }}%
                </div>
                                <ng-template #other>{{-(proyecto.porcentajeAvance - (+(proyecto.porcentajeEsperado))) }}%</ng-template>
            </div>
            <div class="col-md-4">
                                <div *ngIf="(proyecto.porcentajeAvance - (+(proyecto.porcentajeEsperado))) > 0;else other2">
                                    <img src="assets/img/flechaVerde.png" height="10" width="10">
                                </div>
                                <ng-template #other2>
                                    <img src="assets/img/flechaRoja.png" height="10" width="10">
                                </ng-template>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="panel panel-info" style="background-color: #161F31;color:white">
                    <div class="panel-body text-center">
                        <div class="row">
                            <div class="col-md-12">
                                Días de Atraso
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <img src="assets/img/ImagenParaDiasAtraso.png" height="20" width="20">
                            </div>
                            <div class="col-md-4">
                                {{avanceDiaAtrasos}}
                            </div>
                            <div class="col-md-4">
                                <div *ngIf="(avanceDiaAtrasos > 0);else other6">
                                    <img src="assets/img/flechaRoja.png" height="10" width="10">
                                </div>
                                <ng-template #other6>
                                    <img src="assets/img/flechaVerde.png" height="10" width="10">
                                </ng-template>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="text-center center" style="margin-bottom: 30px">
    <p-fileUpload name="file" class="btn btn-default button-azul boton-subida"  #form customUpload="true" (uploadHandler)="uploadHandler($event, form)" multiple="true" accept=".mpp"
        maxFileSize="1000000" mode="basic" chooseLabel="Subir Carta Gantt" auto="true" [disabled]="desabilitarSubir" >
    </p-fileUpload>
</div>
<p-accordion>
    <p-accordionTab header="Planificacion" appendTo="body">
        <div>
            <div class="card">
                <div class="header">
                    <h4 class="title">Planificacion</h4>
                    <p class="category">
                        <a href="javascript:void(0)" (click)="downloadGantt()">descargar gantt</a>
                    </p>
                </div>
                <div class="content">
                    <div class="table-full-width">
                        <p-tabView>
                            <p-tabPanel header="Carta Gant" leftIcon="fa-calendar">
                                <div class="container-fluid" style="margin-top:30px;" #gatt></div>
                            </p-tabPanel>
                            <p-tabPanel header="Kamban" leftIcon="fa-print">
                                <app-kamban></app-kamban>
                            </p-tabPanel>
                        </p-tabView>
                    </div>
                </div>
            </div>
        </div>
    </p-accordionTab>
    <p-accordionTab header="Asignaciones">
        <div>
            <div class="card">
                <div class="header">
                    <h4 class="title">Asignaciones</h4>
                    <p class="category">Porcentaje de asignación</p>
                </div>
                <div class="content">
                    <div class="table-full-width">
                        <daypilot-scheduler [config]="config" [events]="events"></daypilot-scheduler>
                    </div>                    
                </div>
            </div>
        </div>
    </p-accordionTab>
    <p-accordionTab header="Riesgos">
        <div>
            <div class="card">
                <div class="header">
                    <h4 class="title">Riesgos</h4>
                    <p class="category">Todos los riesgos asociados al proyecto</p>
                </div>
                <div class="content">
                    <div class="table-full-width">
                        <app-riesgos></app-riesgos>
                    </div>
                </div>
            </div>
        </div>
    </p-accordionTab>
    <p-accordionTab header="Avances">
        <div>
            <div class="card">
                <div class="header">
                    <h4 class="title">Avances</h4>
                    <p class="category">Todos los avances asociados al proyecto</p>
                </div>
                <div class="content">
                    <div class="table-full-width">
                        <app-avances></app-avances>
                    </div>
                </div>
            </div>
        </div>
    </p-accordionTab>
</p-accordion>
<br>
<br>
<br>

<div class="text-center center" style="margin-bottom: 30px">
    <button type="button" class="btn button-azul" (click)="openModal(template)">Ver Reporte</button>
</div>
<ng-template #template>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Reporte</h4>
        <button type="button" class="close pull-right button-azul" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <app-export></app-export>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn button-azul" (click)="modalRef.hide()">Cerrar</button>
    </div>
</ng-template>






<!-- <a href="javascript:void(0)"  (click)="seeInfoToPdf()" >Previsualizar </a>-->